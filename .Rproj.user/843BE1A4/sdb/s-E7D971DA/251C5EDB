{
    "collab_server" : "",
    "contents" : "# LOAD THE DATASETS\n#  The two datasets we will be using are:\n#  Palm-ROI_downloadable_data.xls\n#  Palm-LosAngelesRentalCensus.csv. \n#  Note that Palm-ROI_downloadable_data.xls has multiple tabs so we will upload them as separate CSV files. Do this for the tabs: ROI_12.14.14, City Revenue, JHFIT-places, and JHFIT-nhoods. Decide not to use the ROI_old tab or dictionary tabs. Select the tab “ROI_12.15.14,” save this as a CSV and rename as “Palm-ROI_12.15.14.csv” Remove the first row of meta column header. Then upload to R. Repeat for the other tabs. \n\n#  The Los Angeles Rental Census data: \nCensusDat = read.csv(\"Palm-LosAngelesRentalCensus.csv\", sep=\",\", header=TRUE) #I had deleted the first header row for this csv file. Was running into issue deleting it with R alone. \n#  Individual CSV files for the ROI data:\nROIDat = read.csv(\"Palm-ROI_12.15.14.csv\", sep=\",\", header=TRUE)\nCityRevenue = read.csv(\"Palm-ROI_cityrevenue.csv\", sep=\",\", header=TRUE)\nJplaces = read.csv(\"Palm-ROI_JHFIT-places.csv\", sep=\",\", header=TRUE)\nJhoods = read.csv(\"Palm-ROI_JHFIT-nhoods.csv\", sep=\",\", header=TRUE)\n\n#EXAMINE THE DATASETS\n#Begin with ROI data\nhead (ROIDat) #Need to remove the excess headers\ncolnames(ROIDat) = lapply(ROIDat[2,], as.character) #Assign row 2 names to the header and convert all the column names to character. \nROIDat = ROIDat[-c(1:2), ] #Remove rows 1 and 2. \n\n#Now bring in the Census data\nhead(CensusDat)\n#Remove the first column since this is not linked to anything:\nCensusDat = CensusDat[, -1]\n\n#Merge the data\n#  Common variable: Census tract identifier. On the CensusDat this is GEOID. On ROIDat this is tract.\tCensus tract identification number is a Geographic identifier. \n\ncolnames(CensusDat)=c(\"tract\",\"ACS_MFRENTALS\",\"ACS_Owners\",\"ACS_SF_Rents\",\"LUPAMS\",\"HCIDLA\",\"LUPAMS_RC\",\"HCIDLA_RC\") #Change the name in CensusDat from GEOID to tract. \nclass(CensusDat$tract) #numeric\nclass(ROIDat$tract) #factor. Change to numeric: \n# ROIDat$tract = as.numeric(ROIDat$tract)\n# class(ROIDat$tract) #numeric. ??It changed all the tracts to single digits. \n#No, it doesn't seem to matter that one is numeric and one is factor because when merge will take the highest level, in this case factor. \n\nMergedDat=merge(ROIDat,CensusDat) #Warning: column names ‘rflag_ecppl1’, ‘rflag_ecppl2’ are duplicated in the result. The problem is that there are two columns labeled rlfag_ecppl1 (\"Homeownership reliability flag\" and \"Employment Rate reliability flag\") and two columns labeled rlflag_ecppl2 (\"Min. Basic Income reliability flag\" and \"Housing Cost Burden reliability flag\"). Go back to the csv file and add an x to differentiate these two.\n#Old issue: levels(ROIDat$rflag_ecppl1) #NULL levels. All the values are zero.\n#Old issue: levels(ROIDat$rflag_ecppl2) #NULL levels. All the values are zero.\n#These above issues were corrected by changing the csv file and re-running the code. \n\n#Observe the merged dataset. Notice there are 1,000 observations according to the CensusDat tract. \n\n#Merge with Palm_ROI_cityrevenue dataset. First, subset this dataset for only Los Angeles. \nhead(CityRevenue)\ncolnames(CityRevenue)=c(\"CityName\",\"cntyname\",\"TotalRevenue\",\"LocalRevenue\",\"pLocalRevenue\",\"TotalRevPerCap\",\"TotalPop\",\"TotalPopMOE\") #Change the name of the second row header. \nCityRevenueLA = subset (CityRevenue, cntyname==\"Los Angeles\") #Subset for only Los Angeles. \n\n#Add CityRevenue to the MergedData set. \nMergedDat2=merge(CityRevenueLA,MergedDat, by=\"cntyname\")\n#this issue is that cntyname is Factor in CityRevenue and cntyname is numeric in MergedDat.\n#It multiplied 88 obs from CityRevenueLA by MergedDat 1,000 observations. Correct? ",
    "created" : 1488321095669.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "2968656808",
    "id" : "251C5EDB",
    "lastKnownWriteTime" : 1488406862,
    "last_content_update" : 1488406862349,
    "path" : "~/Documents/Research/R/ECI289RDavis/Assignments/FinalProject/FinalProjGroup4_2017.2.28.R",
    "project_path" : "FinalProjGroup4_2017.2.28.R",
    "properties" : {
        "tempName" : "Untitled1"
    },
    "relative_order" : 2,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_source"
}